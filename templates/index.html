<!DOCTYPE html>

<html lang="en">
	<head>
	  	<meta charset="utf-8">
	  	<title>Electronic Search Engine</title>
	  	<meta content="width=device-width, initial-scale=1.0" name="viewport">
	  	<meta content="" name="keywords">
	  	<meta content="" name="description">

	  	<!-- Favicons -->
	  	<link href="{{url_for('static',filename='img/favicon.png')}}" rel="icon">
	  	<link href="{{url_for('static',filename='img/apple-touch-icon.png')}}" rel="apple-touch-icon">

	  	<!-- Google Fonts -->
	  	<link href="https://fonts.googleapis.com/css?family=Montserrat:300,400,500,700|Open+Sans:300,300i,400,400i,700,700i" rel="stylesheet">

	  	<!-- Bootstrap CSS File -->
	  	<link href="{{url_for('static',filename='lib/bootstrap/css/bootstrap.min.css')}}" rel="stylesheet">

	  	<!-- Libraries CSS Files -->
	  	<link href="{{url_for('static',filename='lib/ionicons/css/ionicons.min.css')}}" rel="stylesheet">

	  	<!-- Main Stylesheet File -->
	  	<link href="{{url_for('static',filename='css/style.css')}}" rel="stylesheet">

	</head>

	<body>

	  	<header id="header">
	    	<div class="container">
	      		<div id="logo" class="pull-left">
	        		<h1><a class="scrollto">NuK-Search</a></h1>
	      		</div>
	    	</div>
	  	</header><!-- #header -->

	  	<main id="main">

	    <section id="call-to-action">
	    </section>

	    <div id="more-features" class="col-md-12 text-center fix">
		    <div class="form-group col-md-12">
		    	<input type="text" name="text" class="form-control col-lg-6 search" placeholder="Search term (e.g Television)">
		    </div>
		    <button class="btn btn-primary button">Search</button>
	    </div>

	    <!--==========================
	      More Features Section
	    ============================-->
	    <section id="more-features">
	      	<div class="container">

	        	<div class="row" id="returned">

	          		<div class="col-lg-6">
			            <div class="box wow fadeInLeft">
			              	<div class="icon"><i class="ion-ios-stopwatch-outline"></i></div>
			              	<h4 class="title"><a href="">Lorem Ipsum</a></h4>
			              	<p class="description">Voluptatum deleniti atque corrupti quos dolores et quas molestias excepturi sint occaecati cupiditate non provident etiro rabeta lingo.</p>
			            </div>
	          		</div>

	          		<div class="col-lg-6">
			            <div class="box wow fadeInRight">
			              	<div class="icon"><i class="ion-ios-bookmarks-outline"></i></div>
			              	<h4 class="title"><a href="">Dolor Sitema</a></h4>
			              	<p class="description">Minim veniam, quis nostrud exercitation ullamco laboris nisi ut aliquip ex ea commodo consequat tarad limino ata nodera clas.</p>
			            </div>
	          		</div>

	          		<div class="col-lg-6">
			            <div class="box wow fadeInLeft">
			              	<div class="icon"><i class="ion-ios-heart-outline"></i></div>
			              	<h4 class="title"><a href="">Sed ut perspiciatis</a></h4>
			              	<p class="description">Duis aute irure dolor in reprehenderit in voluptate velit esse cillum dolore eu fugiat nulla pariatur trinige zareta lobur trade.</p>
			            </div>
	          		</div>

	          		<div class="col-lg-6">
			            <div class="box wow fadeInRight">
			              	<div class="icon"><i class="ion-ios-analytics-outline"></i></div>
			              	<h4 class="title"><a href="">Magni Dolores</a></h4>
			              	<p class="description">Excepteur sint occaecat cupidatat non proident, sunt in culpa qui officia deserunt mollit anim id est laborum rideta zanox satirente madera</p>
			            </div>
	          		</div>

	        	</div>
	      	</div>
	    </section><!-- #more-features -->

	  </main>

	  <!--==========================
	    Footer
	  ============================-->
	  	<footer id="footer">
	    	<div class="container">
	      		<div class="row">
	        		<div class="col-lg-12 text-center">
	          			<div class="copyright">
	            			&copy; Copyright <strong>NuK-Search</strong>. All Rights Reserved
	          			</div>
		          		<div class="credits">
		            		Designed by <a href="https://bootstrapmade.com/">BootstrapMade</a> | Developed by <a href="">Elite Soft</a>
		          		</div>
	        		</div>
	      		</div>
	    	</div>
	  	</footer>

	  <a href="#" class="back-to-top"><i class="ion-android-arrow-up"></i></a>

	  <!-- JavaScript Libraries -->
	  <script src="{{url_for('static',filename='lib/jquery/jquery.min.js')}}"></script>
	  <script src="{{url_for('static',filename='lib/bootstrap/js/bootstrap.bundle.min.js')}}"></script>

	  <!-- Template Main Javascript File -->
	  <script src="{{url_for('static',filename='js/main.js')}}"></script>

	</body>
</html>


<script>
	$(document).ready(function() {
		$(".button").click(function() {
			var search = $(".search").val().trim();
			if (search) {
				$.ajax({
					type: 'POST',
					url: "{{url_for('ebay_page_post')}}",
					data: JSON.stringify({ 'search': search }),
					contentType: 'application/json;charset=UTF-8',
					dataType: "json",
					success:function(data) {
						if (data.indexOf("|") >= 0) {
							var newData = data.split("|");
							var category = newData[0];
							var title = newData[1];
							var price = newData[2]
							var url = newData[3];
							var seller = newData[4];
							var listingType = newData[5];
							var condition = newData[6];


							$("#returned").html("");
							$("#returned").append(returned(category, title, price, url, seller, listingType, condition));
						} else {
							$("#returned").html("<label>"+data+"</label>");
						}
					}
				});
			}
		});
	});


	function returned(category, title, price, url, seller, listingType, condition) {
		return '<div class="col-lg-6"> ' +
			            '<div class="box">'+
			              	'<div class="icon"><i class="ion-ios-heart-outline"></i></div>' +
			              	'<h4 class="title">'+title+'</h4>' +
			              	'<h5>'+category+'</h5>' +
			              	'<small><a href="'+url+'" target="_blank">Go to site</a></small>'+
			              	'<div class="description">' +
			              		'Price: <strong>'+price+'</strong>' +
			              		'<p>Seller: <strong>'+seller+'</strong></p>' +
			              		'<p>'+listingType+'</p>' +
			              		'<p>Condition: '+condition+'</p>' +
			              	'</div>' +
			            '</div>' +
	          		'</div>';
	}


	/*$(document).ready(function() {
		$(".button").click(function() {
			var search = $(".search").val().trim();
			if (search) {
				$.ajax({
					type: 'POST',
					url: "{{url_for('ebay_page_post')}}",
					data: JSON.stringify({ 'search': search }),
					contentType: 'application/json;charset=UTF-8',
					dataType: "json",
					success:function(data) {

						if (data.indexOf("#") >= 0) {

							$("#returned").html("");
							var splitted = data.split("#");

							for (var i = 0; i <= splitted.length; i++) {

								if (splitted.indexOf("|") >= 0) {
									var newData = splitted.split("|");

									var category = newData[0];
									var title = newData[1];
									var price = newData[2]
									var url = newData[3];
									var seller = newData[4];
									var listingType = newData[5];
									var condition = newData[6];


									$("#returned").append(returned(category, title, price, url, seller, listingType, condition));
								}
							}
						} else {
							$("#returned").html("<label>"+data+"</label>");
						}
					}
				});
			}
		});
	});


	function returned(category, title, price, url, seller, listingType, condition) {
		return '<div class="col-lg-6"> ' +
			            '<div class="box">'+
			              	'<div class="icon"><i class="ion-ios-heart-outline"></i></div>' +
			              	'<h4 class="title">'+title+'</h4>' +
			              	'<h5>'+category+'</h5>' +
			              	'<small><a href="'+url+'" target="_blank">Go to site</a></small>'+
			              	'<div class="description">' +
			              		'Price: <strong>'+price+'</strong>' +
			              		'<p>Seller: <strong>'+seller+'</strong></p>' +
			              		'<p>'+listingType+'</p>' +
			              		'<p>Condition: '+condition+'</p>' +
			              	'</div>' +
			            '</div>' +
	          		'</div>';
	}*/
</script>